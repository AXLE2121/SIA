<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Signup</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>
  <h2>Create Account</h2>

  <form id="signupForm">
    <input type="email" id="suEmail" placeholder="Email" required />
    <br /><br />
    <input type="password" id="suPassword" placeholder="Password" required />
    <br /><br />
    <button type="submit">Sign Up</button>
  </form>

  <p id="suMsg"></p>

  <script type="module">
    /* ===== Firebase setup (same idea will be in login page) ===== */
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { 
      getAuth, 
      createUserWithEmailAndPassword, 
      sendEmailVerification 
    } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
    import { 
      getFirestore, 
      doc, 
      setDoc, 
      serverTimestamp 
    } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

    // ðŸ”´ CHANGE THESE VALUES using your own Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyDXmcoM0Sk3lJInvJi2mGWeXTkkOiA00ZU",
    authDomain: "siaa-ff9f4.firebaseapp.com",
    projectId: "siaa-ff9f4",
    storageBucket: "siaa-ff9f4.firebasestorage.app",
    messagingSenderId: "368180748618",
    appId: "1:368180748618:web:eb7a6283acbb749e54e1b3",
    measurementId: "G-3DD027B5P7"
  };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    /* ===== Signup code ===== */
    const form = document.getElementById("signupForm");
    const msg = document.getElementById("suMsg");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const email = document.getElementById("suEmail").value;
      const password = document.getElementById("suPassword").value;

      try {
        const cred = await createUserWithEmailAndPassword(auth, email, password);

        // send verification email
        await sendEmailVerification(cred.user);

        // save to Firestore
        await setDoc(doc(db, "users", cred.user.uid), {
          email,
          createdAt: serverTimestamp(),
        });

        msg.textContent = "Account created. Please check your email and verify before logging in.";
      } catch (err) {
        msg.textContent = err.message;
      }
    });
  </script>
</body>
</html>
